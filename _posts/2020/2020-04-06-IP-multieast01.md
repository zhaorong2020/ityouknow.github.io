---
layout: post
title: IP 多播之基本概念
category: network-protocol
tags: [network-protocol]
excerpt: 一种节约网络资源的方式
---


##（一）IP多播基本概念

IP多播是一种一对多的通信方式，与IP单播相比它大大节约网络资源，当主机数越大效果越明显。  
如下图所示，视频服务器要以单播方式发送时需要发送90个副本。
但如果以多播方式发送，只需要发送3个副本分别给R1，R2，R3路由器即可，当分组到达局域网时
，由于局域网具备硬件多播功能，不需要再进行复制在局域网上的多播组成员就能收到这个分组

![](https://zhaorong2020.github.io/assets/images/2020/net-protocol/IpMultieast01.jpg)

当多播要在互联网上是是现实时，就需要多播路由器来实现。能够运行多播协议的路由器称为多播路由器，多播路由器也可以转发IP单播。在互联网上进行的多播叫做IP多播。

多播与单播的主要区别就是，多播IP数据报的目的地址使用D类IP地址（多播地址），首部协议字段值
为2，表明使用网际组管理协议IGMP。多播地址只能用作目的地址，不能用作源地址，多播数据报不能产生ICMP差错报文。因此ping一个多播地址永远不会收到回复。

任何一个应用进程都可以向一个多播组发送消息，即便它没有加入该多播组

##（二）在局域网进行硬件多播

在局域网内主要通过链路层的MAC地址实现数据报的转发，此处就牵扯到D类IP地址到以太网硬件地址的映射，映射方式如下图所示：
	
![](https://zhaorong2020.github.io/assets/images/2020/net-protocol/IpMultieast02.jpg)

由于IP地址与以太网硬件地址的映射不是唯一的，应此收到多播数据报的主机还要在IP层利用软件进行一次过滤。
	
##（三）IP多播所需的两种协议

要实现IP多播需要两种协议的维护：1、IGMP（网际组管理协议）  2、多播路由选择协议

IGMP协议是让连接在本地局域网上的多播路由器知道本地局域网上是否有主机加入或离开了某个多播路由
多播路由选择协议负责使连接在局域网上的多播路由器与互联网上的其他多播路由器协同合作，以便把多播数据报以最小的代价传播给所有组成员

多播转发必须动态适应多播组成员的变化（这是网络拓扑并没有发生改变），但单播路由选择通常是在网络拓扑发生变化时才需要更新路由

多播路由器在转发多播数据报时，不能仅仅根据多播数据报中的目的地址，还要考虑这个多播数据报从什么地方来和要到什么地方去

多播数据报可以有没有加入多播组的主机发出，也可以通过没有组成员介入的网络
	
	
 
	




